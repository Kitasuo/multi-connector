<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 3.2.1 (Python 3.8.3 on win32)" generated="20200918 12:28:21.706" rpa="false">
<suite id="s1" name="Connector Tests" source="C:\Users\artor\WebstormProjects\translator\robottests\connectors\nysse\connector_tests.robot">
<test id="s1-t1" name="fetch, 200">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200918 12:28:22.108" level="INFO">${body} = {'productCode': 'default_nysse', 'parameters': {'ids': ['130792', '130793']}}</msg>
<status status="PASS" starttime="20200918 12:28:22.108" endtime="20200918 12:28:22.108"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200918 12:28:22.109" level="INFO">${now} = 2020-09-18T09:28:22+00:00</msg>
<status status="PASS" starttime="20200918 12:28:22.108" endtime="20200918 12:28:22.109"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:22.109" endtime="20200918 12:28:22.109"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:22.109" endtime="20200918 12:28:22.109"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200918 12:28:22.109" level="INFO">${json_string} = {"productCode": "default_nysse", "parameters": {"ids": ["130792", "130793"]}, "timestamp": "2020-09-18T09:28:22+00:00"}</msg>
<status status="PASS" starttime="20200918 12:28:22.109" endtime="20200918 12:28:22.109"></status>
</kw>
<msg timestamp="20200918 12:28:22.110" level="INFO">${body} = {'productCode': 'default_nysse', 'parameters': {'ids': ['130792', '130793']}, 'timestamp': '2020-09-18T09:28:22+00:00'}</msg>
<status status="PASS" starttime="20200918 12:28:22.108" endtime="20200918 12:28:22.110"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200918 12:28:22.110" level="INFO">${signature} = K5OKM585s5QFLdnAQZ2T/TccHM+zrVzg76l7S7897IY=</msg>
<status status="PASS" starttime="20200918 12:28:22.110" endtime="20200918 12:28:22.110"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:22.110" endtime="20200918 12:28:22.111"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:22.111" endtime="20200918 12:28:24.607"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200918 12:28:24.608" level="INFO">
{
    "type": "object",
    "properties": {
        "@context": {
            "type": "string",
            "default": "https://standards.oftrust.net/v2/Context/DataProductOutput/Position/"
        },
        "data": {
            "type": "object",
            "properties": {
                "vehicles": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "string"
                            },
                            "positions": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "@type": {
                                            "type": "string"
                                        },
                                        "timestamp": {
                                            "type": "string"
                                        },
                                        "coordinates": {
                                            "type": "object",
                                            "properties": {
                                                "latitude": {
                                                    "type": "number"
                                                },
                                                "longitude": {
                                                    "type": "number"
                                                },
                                                "bearing": {
                                                    "type": "number"
                                                },
                                                "speed": {
                                                    "type": "number"
                                                }
                                            },
                                            "required": [
                                                "bearing",
                                                "latitude",
                                                "longitude",
                                                "speed"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "@type",
                                        "coordinates",
                                        "timestamp"
                                    ]
                                }
                            }
                        },
                        "required": [
                            "id",
                            "positions"
                        ]
                    },
                    "default": [
                        {
                            "id": "130792",
                            "positions": [
                                {
                                    "@type": "Position",
                                    "timestamp": "2020-09-18T09:28:22.000Z",
                                    "coordinates": {
                                        "latitude": 61.398643493652344,
                                        "longitude": 23.769973754882812,
                                        "bearing": 135.8518829345703,
                                        "speed": 18.132530212402344
                                    }
                                }
                            ]
                        },
                        {
                            "id": "130793",
                            "positions": [
                                {
                                    "@type": "Position",
                                    "timestamp": "2020-09-18T09:28:23.000Z",
                                    "coordinates": {
                                        "latitude": 61.48345184326172,
                                        "longitude": 23.75599479675293,
                                        "bearing": 261.40283203125,
                                        "speed": 4.26555871963501
                                    }
                                }
                            ]
                        }
                    ]
                }
            },
            "required": [
                "vehicles"
            ]
        },
        "signature": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "default": "RsaSignature2018"
                },
                "created": {
                    "type": "string",
                    "default": "2020-09-18T12:28:24+03:00"
                },
                "creator": {
                    "type": "string",
                    "default": "http://localhost:8080/translator/v1/public.key"
                },
                "signatureValue": {
                    "type": "string",
                    "default": "OgNNgXaXPEknFwHfGgmaOdBvJTeew3kuHXTDJ4fmfU+kfun1WOnvtuiwGeDO9xcrHLkFr8L+6uBoa/kClSO0sJDLwIQVhANznzgF8oDU1ecVDj8H7A3G6YRCWQgi6VIjDah9KwPnphlIepHNsEyP/7KetxBfDtD2+xwFD66LM4P7JCiFfMOz/DnJEKxClVVLn4/MhB2FArWtyfw0E4LN6/euoxDhn1cVimLw6XYGImjdOpZotK2vB2CWXAxcj97Qo6ZFaG8hwwSlzKE1Ecel3xLQ4b6lLU4SB+73xXf0zydUnpixP0itFJNs3lk0Ac+60utDQxioGJLb+VchLPSLkuW8h39lyqF15gzrUrdwMeJhstRwSaBDqsGl1PjGuU6mJ/h6a8psaUS1+4i8ima5mKmCEgQn2T0nG7XAyEEdcSdU3fPZpE91+OKXjAPufj7ALVAmunmuOMS3aHhLy6EYE1GAcG2qCMRtf9LNU5NzHPjnWFdnZWru2AoZyHmp4h9jyvUHZ02VoAqoIUA5ANSS/VRQMSr1+gsSS1S4ly1vrFWSUYld4Wwp47NL3T+0Vm7gUJl0yCbAKFu+62NvRj8xlgLGWahNj42Lunm1kViuwxTYoscwl0oI/RPPYs8nkld3PEsn8CnKVYsH7cTZvhNYGNBtyMYIuBJGTcsj4duwQ18="
                }
            },
            "required": [
                "created",
                "creator",
                "signatureValue",
                "type"
            ]
        }
    },
    "required": [
        "@context",
        "data",
        "signature"
    ]
}</msg>
<status status="PASS" starttime="20200918 12:28:24.607" endtime="20200918 12:28:24.626"></status>
</kw>
<status status="PASS" starttime="20200918 12:28:22.110" endtime="20200918 12:28:24.626"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>200</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.628" endtime="20200918 12:28:24.629"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body @context</arg>
<arg>https://standards.oftrust.net/v2/Context/DataProductOutput/Position/</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.632" endtime="20200918 12:28:24.633"></status>
</kw>
<kw name="Object" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON object.*</doc>
<arguments>
<arg>response body data</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.634" endtime="20200918 12:28:24.635"></status>
</kw>
<kw name="Array" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON array.*</doc>
<arguments>
<arg>response body data vehicles</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.636" endtime="20200918 12:28:24.637"></status>
</kw>
<kw name="Array" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON array.*</doc>
<arguments>
<arg>response body data vehicles 0 positions</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.637" endtime="20200918 12:28:24.638"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body data vehicles 0 positions 0 @type</arg>
<arg>Position</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.638" endtime="20200918 12:28:24.639"></status>
</kw>
<tags>
<tag>bug-0001</tag>
</tags>
<status status="PASS" starttime="20200918 12:28:22.107" endtime="20200918 12:28:24.639" critical="yes"></status>
</test>
<test id="s1-t2" name="fetch, 422, Missing data for timestamp required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200918 12:28:24.641" level="INFO">${body} = {'productCode': 'default_nysse', 'parameters': {'ids': ['130792', '130793']}}</msg>
<status status="PASS" starttime="20200918 12:28:24.641" endtime="20200918 12:28:24.642"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200918 12:28:24.642" level="INFO">${now} = 2020-09-18T09:28:24+00:00</msg>
<status status="PASS" starttime="20200918 12:28:24.642" endtime="20200918 12:28:24.642"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.642" endtime="20200918 12:28:24.642"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.642" endtime="20200918 12:28:24.642"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200918 12:28:24.643" level="INFO">${json_string} = {"productCode": "default_nysse", "parameters": {"ids": ["130792", "130793"]}, "timestamp": "2020-09-18T09:28:24+00:00"}</msg>
<status status="PASS" starttime="20200918 12:28:24.642" endtime="20200918 12:28:24.643"></status>
</kw>
<msg timestamp="20200918 12:28:24.643" level="INFO">${body} = {'productCode': 'default_nysse', 'parameters': {'ids': ['130792', '130793']}, 'timestamp': '2020-09-18T09:28:24+00:00'}</msg>
<status status="PASS" starttime="20200918 12:28:24.641" endtime="20200918 12:28:24.643"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.645" endtime="20200918 12:28:24.645"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200918 12:28:24.648" level="INFO">${signature} = gL72gZPWWkwBlNj0+2EwIHujBzR5Q4upWXaaztUujhU=</msg>
<status status="PASS" starttime="20200918 12:28:24.648" endtime="20200918 12:28:24.648"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.648" endtime="20200918 12:28:24.649"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:24.649" endtime="20200918 12:28:26.656"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200918 12:28:26.656" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "integer",
                    "default": 422
                },
                "message": {
                    "type": "object",
                    "properties": {
                        "timestamp": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        }
                    },
                    "required": [
                        "timestamp"
                    ]
                }
            },
            "required": [
                "message",
                "status"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20200918 12:28:26.656" endtime="20200918 12:28:26.657"></status>
</kw>
<status status="PASS" starttime="20200918 12:28:24.648" endtime="20200918 12:28:26.657"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:26.658" endtime="20200918 12:28:26.658"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:26.659" endtime="20200918 12:28:26.659"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error message timestamp 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:26.659" endtime="20200918 12:28:26.660"></status>
</kw>
<tags>
<tag>bug-0001</tag>
</tags>
<status status="PASS" starttime="20200918 12:28:24.640" endtime="20200918 12:28:26.660" critical="yes"></status>
</test>
<test id="s1-t3" name="fetch, 422, Missing data for parameters required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200918 12:28:26.661" level="INFO">${body} = {'productCode': 'default_nysse', 'parameters': {'ids': ['130792', '130793']}}</msg>
<status status="PASS" starttime="20200918 12:28:26.661" endtime="20200918 12:28:26.661"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200918 12:28:26.662" level="INFO">${now} = 2020-09-18T09:28:26+00:00</msg>
<status status="PASS" starttime="20200918 12:28:26.661" endtime="20200918 12:28:26.662"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:26.662" endtime="20200918 12:28:26.662"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:26.662" endtime="20200918 12:28:26.662"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200918 12:28:26.662" level="INFO">${json_string} = {"productCode": "default_nysse", "parameters": {"ids": ["130792", "130793"]}, "timestamp": "2020-09-18T09:28:26+00:00"}</msg>
<status status="PASS" starttime="20200918 12:28:26.662" endtime="20200918 12:28:26.662"></status>
</kw>
<msg timestamp="20200918 12:28:26.663" level="INFO">${body} = {'productCode': 'default_nysse', 'parameters': {'ids': ['130792', '130793']}, 'timestamp': '2020-09-18T09:28:26+00:00'}</msg>
<status status="PASS" starttime="20200918 12:28:26.661" endtime="20200918 12:28:26.663"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body}</arg>
<arg>parameters</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:26.663" endtime="20200918 12:28:26.663"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200918 12:28:26.664" level="INFO">${signature} = p5mlyQ7mFYlBEc0DykqE+0hbK2bc91l2x0/d/trkJjU=</msg>
<status status="PASS" starttime="20200918 12:28:26.663" endtime="20200918 12:28:26.664"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:26.664" endtime="20200918 12:28:26.664"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:26.664" endtime="20200918 12:28:28.671"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200918 12:28:28.671" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "integer",
                    "default": 422
                },
                "message": {
                    "type": "object",
                    "properties": {
                        "parameters": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        }
                    },
                    "required": [
                        "parameters"
                    ]
                }
            },
            "required": [
                "message",
                "status"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20200918 12:28:28.671" endtime="20200918 12:28:28.673"></status>
</kw>
<status status="PASS" starttime="20200918 12:28:26.663" endtime="20200918 12:28:28.673"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:28.673" endtime="20200918 12:28:28.673"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:28.674" endtime="20200918 12:28:28.674"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error message parameters 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:28.675" endtime="20200918 12:28:28.675"></status>
</kw>
<tags>
<tag>bug-0002</tag>
</tags>
<status status="PASS" starttime="20200918 12:28:26.660" endtime="20200918 12:28:28.676" critical="yes"></status>
</test>
<test id="s1-t4" name="fetch, 422, Missing data for ids required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200918 12:28:28.678" level="INFO">${body} = {'productCode': 'default_nysse', 'parameters': {'ids': ['130792', '130793']}}</msg>
<status status="PASS" starttime="20200918 12:28:28.677" endtime="20200918 12:28:28.678"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200918 12:28:28.678" level="INFO">${now} = 2020-09-18T09:28:28+00:00</msg>
<status status="PASS" starttime="20200918 12:28:28.678" endtime="20200918 12:28:28.678"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:28.678" endtime="20200918 12:28:28.678"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:28.678" endtime="20200918 12:28:28.679"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200918 12:28:28.679" level="INFO">${json_string} = {"productCode": "default_nysse", "parameters": {"ids": ["130792", "130793"]}, "timestamp": "2020-09-18T09:28:28+00:00"}</msg>
<status status="PASS" starttime="20200918 12:28:28.679" endtime="20200918 12:28:28.679"></status>
</kw>
<msg timestamp="20200918 12:28:28.679" level="INFO">${body} = {'productCode': 'default_nysse', 'parameters': {'ids': ['130792', '130793']}, 'timestamp': '2020-09-18T09:28:28+00:00'}</msg>
<status status="PASS" starttime="20200918 12:28:28.677" endtime="20200918 12:28:28.679"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>ids</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:28.679" endtime="20200918 12:28:28.680"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200918 12:28:28.680" level="INFO">${signature} = UphJvkZiq4j7mXJk7Yx/AuMMqjxe0Xqk6t6iD6RA9Xc=</msg>
<status status="PASS" starttime="20200918 12:28:28.680" endtime="20200918 12:28:28.680"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:28.680" endtime="20200918 12:28:28.680"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:28.680" endtime="20200918 12:28:30.695"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200918 12:28:30.696" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "integer",
                    "default": 422
                },
                "message": {
                    "type": "object",
                    "properties": {
                        "parameters.ids": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        }
                    },
                    "required": [
                        "parameters.ids"
                    ]
                }
            },
            "required": [
                "message",
                "status"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20200918 12:28:30.695" endtime="20200918 12:28:30.698"></status>
</kw>
<status status="PASS" starttime="20200918 12:28:28.680" endtime="20200918 12:28:30.698"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:30.698" endtime="20200918 12:28:30.699"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:30.699" endtime="20200918 12:28:30.699"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error message parameters.ids 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:30.700" endtime="20200918 12:28:30.700"></status>
</kw>
<tags>
<tag>bug-0003</tag>
</tags>
<status status="PASS" starttime="20200918 12:28:28.677" endtime="20200918 12:28:30.700" critical="yes"></status>
</test>
<test id="s1-t5" name="fetch, 200, Empty ids">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200918 12:28:30.702" level="INFO">${body} = {'productCode': 'default_nysse', 'parameters': {'ids': ['130792', '130793']}}</msg>
<status status="PASS" starttime="20200918 12:28:30.702" endtime="20200918 12:28:30.702"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200918 12:28:30.702" level="INFO">${now} = 2020-09-18T09:28:30+00:00</msg>
<status status="PASS" starttime="20200918 12:28:30.702" endtime="20200918 12:28:30.702"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:30.703" endtime="20200918 12:28:30.703"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:30.703" endtime="20200918 12:28:30.703"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200918 12:28:30.703" level="INFO">${json_string} = {"productCode": "default_nysse", "parameters": {"ids": ["130792", "130793"]}, "timestamp": "2020-09-18T09:28:30+00:00"}</msg>
<status status="PASS" starttime="20200918 12:28:30.703" endtime="20200918 12:28:30.703"></status>
</kw>
<msg timestamp="20200918 12:28:30.703" level="INFO">${body} = {'productCode': 'default_nysse', 'parameters': {'ids': ['130792', '130793']}, 'timestamp': '2020-09-18T09:28:30+00:00'}</msg>
<status status="PASS" starttime="20200918 12:28:30.702" endtime="20200918 12:28:30.704"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>ids=@{EMPTY}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:30.704" endtime="20200918 12:28:30.704"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200918 12:28:30.705" level="INFO">${signature} = Nn4w6qzrOO/MGHxScsDK2CjS1CiQlQ3PzALhNmz1YRA=</msg>
<status status="PASS" starttime="20200918 12:28:30.705" endtime="20200918 12:28:30.705"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:30.705" endtime="20200918 12:28:30.705"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${CONNECTOR_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:30.705" endtime="20200918 12:28:32.718"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200918 12:28:32.719" level="INFO">
{
    "type": "object",
    "properties": {
        "@context": {
            "type": "string",
            "default": "https://standards.oftrust.net/v2/Context/DataProductOutput/Position/"
        },
        "data": {
            "type": "object",
            "properties": {
                "vehicles": {
                    "type": "array",
                    "default": []
                }
            },
            "required": [
                "vehicles"
            ]
        },
        "signature": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "default": "RsaSignature2018"
                },
                "created": {
                    "type": "string",
                    "default": "2020-09-18T12:28:32+03:00"
                },
                "creator": {
                    "type": "string",
                    "default": "http://localhost:8080/translator/v1/public.key"
                },
                "signatureValue": {
                    "type": "string",
                    "default": "nO3irIhC5qpUw7ioQmvnwHbM/r+RNIUlhNE8i+SmIhprOzwBAtadlCjLY85aT1WHXQVqmDAAHwIwLv6ZugJSq7U4SyE6mV7xfj+Ca+zl58Y7A+tnimtmZM5YB1yxBwd2psMTtwNGOALs6MD/n8R8KQwKMWuAvJQm3nO5kjR2tnP8CC1GsG2OyLn3smza/jq6gODaq7sERcf1uraRUoo8SYhJbF9IPTquEbTFiECA2GrD3EaRa4wQIzdQyswdKc4MzTGdVf/Aax2d7j4S9HM9pTo76jav9iHEhdh1flTYuwYP1qqaVSTFJescHYBFZPyZWrhc0FuxVtyVUP23RcA6WCpEdgTBw0q4CfR4KUQdXXUdEi8u8rosi8D4fW4H36u+1/Ayolt22eAWEmFo4nTo5vfeOWYTmetCJ9aS5I5n/0Q+slRFeKbfcfVYl/a410wzBwgb0qc3CVnDqNddPb9eZ+6yAqdCvP4aUOWULsuFexmX3/GK54ATVWHgw8EhrVrJLj6gKFVZ/DDK0EHp2RnoWIbu8YA6xunbHAUOgqMF4tHhGcniy+MtsbgE74ZdZvRRG6xDfJEVTYE1uogtVqIgO/wCM7lVP5451Z5sR5EZfYVT93HxYtBut4+NK7bVMhy8uwxZKXvEym8rUrPkvDUU4iIjiX+6LICoiCY5nY2fZqw="
                }
            },
            "required": [
                "created",
                "creator",
                "signatureValue",
                "type"
            ]
        }
    },
    "required": [
        "@context",
        "data",
        "signature"
    ]
}</msg>
<status status="PASS" starttime="20200918 12:28:32.718" endtime="20200918 12:28:32.721"></status>
</kw>
<status status="PASS" starttime="20200918 12:28:30.704" endtime="20200918 12:28:32.721"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>200</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:32.721" endtime="20200918 12:28:32.722"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body @context</arg>
<arg>https://standards.oftrust.net/v2/Context/DataProductOutput/Position/</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:32.722" endtime="20200918 12:28:32.722"></status>
</kw>
<kw name="Array" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON array.*</doc>
<arguments>
<arg>response body data vehicles</arg>
<arg>maxItems=0</arg>
</arguments>
<status status="PASS" starttime="20200918 12:28:32.724" endtime="20200918 12:28:32.725"></status>
</kw>
<tags>
<tag>bug-0004</tag>
</tags>
<status status="PASS" starttime="20200918 12:28:30.701" endtime="20200918 12:28:32.725" critical="yes"></status>
</test>
<doc>Nysse GTFS RT public API Tests</doc>
<status status="PASS" starttime="20200918 12:28:21.707" endtime="20200918 12:28:32.727"></status>
</suite>
<statistics>
<total>
<stat pass="5" fail="0">Critical Tests</stat>
<stat pass="5" fail="0">All Tests</stat>
</total>
<tag>
<stat pass="2" fail="0">bug-0001</stat>
<stat pass="1" fail="0">bug-0002</stat>
<stat pass="1" fail="0">bug-0003</stat>
<stat pass="1" fail="0">bug-0004</stat>
</tag>
<suite>
<stat pass="5" fail="0" id="s1" name="Connector Tests">Connector Tests</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
